"use strict";(self.webpackChunknodebucket=self.webpackChunknodebucket||[]).push([[609],{2609:(T,p,s)=>{s.r(p),s.d(p,{SecurityModule:()=>Z});var g=s(6814),u=s(1043),r=s(6223),a=s(4828),e=s(5879);let f=(()=>{class t{static#e=this.\u0275fac=function(n){return new(n||t)};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-security"]],decls:1,vars:0,template:function(n,i){1&n&&e._UZ(0,"router-outlet")},dependencies:[a.lC],encapsulation:2})}return t})();var m=s(459),b=s(9862);let h=(()=>{class t{constructor(o,n){this.http=o,this.cookieService=n,this.baseUrl="/api",this.employeeIds=[1007,1008,1009,1010,1011,1012]}validate(o){return this.employeeIds.some(n=>n===o)}getEmployeeName(o){return this.http.get(`${this.baseUrl}/employees/${o}`)}static#e=this.\u0275fac=function(n){return new(n||t)(e.LFG(b.eN),e.LFG(m.N))};static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var x=s(2939);function v(t,l){if(1&t&&(e.TgZ(0,"div",15),e._uU(1),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.hij(" ",o.errorMessage," ")}}function I(t,l){1&t&&(e.TgZ(0,"div"),e._uU(1," The Employee ID is required. "),e.qZA())}function y(t,l){1&t&&(e.TgZ(0,"div"),e._uU(1," The Employee ID should be a numeric value. "),e.qZA())}function k(t,l){if(1&t&&(e.TgZ(0,"div",15),e.YNc(1,I,2,0,"div",16),e.YNc(2,y,2,0,"div",16),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",null==o.form.empId.errors?null:o.form.empId.errors.required),e.xp6(1),e.Q6J("ngIf",null==o.form.empId.errors?null:o.form.empId.errors.pattern)}}const C=[{path:"",component:f,children:[{path:"sign-in",component:(()=>{class t{constructor(o,n,i,c,d){this.router=o,this.cookieService=n,this.fb=i,this.signInService=c,this.snackBar=d,this.signInForm=new r.cw({}),this.errorMessage=""}showSnackBar(o,n,i,c="",d=""){this.snackBar.open(`${o}${c}${d}`,n,{duration:i,verticalPosition:"top",panelClass:"app-notification-success"})}ngOnInit(){this.signInForm=this.fb.group({empId:["",[r.kI.required,r.kI.pattern("^[0-9]*$")]]})}get form(){return this.signInForm.controls}onSubmit(){const n=parseInt(this.signInForm.value.empId);this.signInService.validate(n)?this.signInService.getEmployeeName(n).subscribe({next:i=>{this.showSnackBar("Welcome, ","Close",5e3,i.firstName,"!"),this.cookieService.set("session_user",n.toString(),1),this.cookieService.set("fullName",`${i.firstName} ${i.lastName}`,1),this.router.navigate(["/task-management"])},error:i=>{console.error("Error fetching employee name",i),this.errorMessage="Failed to fetch employee details, please try again."}}):(console.log("Error: Invalid Employee ID"),this.errorMessage="The Employee ID you entered is invalid, please try again.")}static#e=this.\u0275fac=function(n){return new(n||t)(e.Y36(a.F0),e.Y36(m.N),e.Y36(r.qu),e.Y36(h),e.Y36(x.ux))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-sign-in"]],decls:23,vars:4,consts:[[1,"background-image"],[1,"text-gray",2,"font-size","60%"],["href","https://www.Unsplash.com/","target","_blank",1,"text-dark"],[1,"login-container"],[1,"login-card"],[1,"icon-container"],[1,"fas","fa-user","fa-3x"],[1,"login-title"],[3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["type","text","id","empId","placeholder","Employee ID","formControlName","empId",1,"form-control"],["for","empId"],["class","alert alert-danger",4,"ngIf"],["type","submit",1,"btn","btn-mod","btn-border","btn-circle","btn-large",3,"disabled"],["href","/",1,"d-block","mt-3","back-link"],[1,"alert","alert-danger"],[4,"ngIf"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"small",1)(2,"em"),e._uU(3,"Image courtesy of "),e.qZA(),e.TgZ(4,"a",2),e._uU(5,"Unsplash.com "),e.qZA()(),e.TgZ(6,"div",3)(7,"div",4)(8,"div",5),e._UZ(9,"i",6),e.qZA(),e.TgZ(10,"h1",7),e._uU(11,"Employee Sign In"),e.qZA(),e.TgZ(12,"form",8),e.NdJ("ngSubmit",function(){return i.onSubmit(),i.signInForm.reset()}),e.TgZ(13,"div",9),e._UZ(14,"input",10),e.TgZ(15,"label",11),e._uU(16,"Employee ID"),e.qZA()(),e.YNc(17,v,2,1,"div",12),e.YNc(18,k,3,2,"div",12),e.TgZ(19,"button",13),e._uU(20," Sign In "),e.qZA()(),e.TgZ(21,"a",14),e._uU(22,"Go Back"),e.qZA()()()()),2&n&&(e.xp6(12),e.Q6J("formGroup",i.signInForm),e.xp6(5),e.Q6J("ngIf",i.errorMessage),e.xp6(1),e.Q6J("ngIf",i.form.empId.errors&&i.form.empId.touched),e.xp6(1),e.Q6J("disabled",!i.signInForm.valid))},dependencies:[g.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u],styles:['.background-image[_ngcontent-%COMP%]{height:100vh;position:relative}.background-image[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;z-index:-1;background-image:url(signin.9c90740d7f3953bb.jpg);background-size:cover;background-repeat:no-repeat;background-position:center center;opacity:.5;height:100%}.login-card[_ngcontent-%COMP%]{width:350px;margin:80px auto 0;padding:20px;border-radius:7px;box-shadow:0 4px 6px #0000001a;background:#ffffff;position:relative}.icon-container[_ngcontent-%COMP%]{width:90px;height:90px;background-color:#222f5b;border-radius:50%;position:absolute;top:-35px;left:50%;transform:translate(-50%);display:flex;align-items:center;justify-content:center}.login-title[_ngcontent-%COMP%]{text-align:center;margin-top:40px;font-size:24px;font-weight:700;padding:20px 0;color:#222f5b}.login-field[_ngcontent-%COMP%]{padding:15px;margin-bottom:5px;border-radius:5px;border:1px solid #ccc;width:100%}.fas.fa-user[_ngcontent-%COMP%]{color:#fff}.login-container[_ngcontent-%COMP%], form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch}.back-link[_ngcontent-%COMP%]{margin-top:20px;text-decoration:underline;color:#222f5b;border-radius:4px;transition:background-color .3s}.back-link[_ngcontent-%COMP%]:hover{color:#ababab}.btn-mod.btn-large[_ngcontent-%COMP%]{height:auto;padding:13px 52px;font-size:15px}.btn-mod.btn-border[_ngcontent-%COMP%]{color:#fff;border:2px solid #946b2d;background:#946b2d;border-radius:8px}.btn-mod[_ngcontent-%COMP%], a.btn-mod[_ngcontent-%COMP%]{box-sizing:border-box;padding:4px 13px;color:#fff;background:#222f5b;border:2px solid transparent;font-size:11px;font-weight:400;text-transform:uppercase;text-decoration:none;letter-spacing:2px;border-radius:0;box-shadow:none;transition:all .2s cubic-bezier(0,0,.58,1)}.btn-mod.btn-border[_ngcontent-%COMP%]:hover, .btn-mod.btn-border[_ngcontent-%COMP%]:focus{color:#222f5b;border-color:#222f5b;background:#bebebe}']})}return t})(),title:"Nodebucket: Sign In"}]}];let S=(()=>{class t{static#e=this.\u0275fac=function(n){return new(n||t)};static#t=this.\u0275mod=e.oAB({type:t});static#n=this.\u0275inj=e.cJS({imports:[a.Bz.forChild(C),a.Bz]})}return t})(),Z=(()=>{class t{static#e=this.\u0275fac=function(n){return new(n||t)};static#t=this.\u0275mod=e.oAB({type:t});static#n=this.\u0275inj=e.cJS({imports:[g.ez,S,u.lN,r.UX]})}return t})()}}]);